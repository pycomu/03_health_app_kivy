#: import get_color_from_hex kivy.utils.get_color_from_hex


<MainPage>:
# +++++++++++++++++++++++++++ Register ++++++++++++++++++++++++++++++++++++++++++++++++++++++++
    MDScreen:
        name: "Register"
        MDFloatLayout:
            orientation: "vertical"
            MDLabel:
                text : "Register Screen"
                halign : "center"
                pos_hint:{'center_x': 0.5, 'center_y': 0.9}
            MDFillRoundFlatButton:
                text: "nach Login"
                md_bg_color: app.theme_cls.primary_light
                theme_text_color: "Custom"
                
                text_color: app.theme_cls.primary_dark
                
                size_hint_x: 0.8
                size_hint_y: 0.1
                pos_hint:{'center_x': 0.5, 'center_y': 0.2}
                on_release:
                    root.goto_login() # next page via py file
                    

# +++++++++++++++++++++++++++ Login ++++++++++++++++++++++++++++++++++++++++++++++++++++++++
    MDScreen:
        name: "Login"
        
        MDFloatLayout:
            orientation: "vertical"
            MDLabel:
                text : "Login Screen"
                halign : "center"
                pos_hint:{'center_x': 0.5, 'center_y': 0.9}
            MDFillRoundFlatButton:
                text: "Blutdruck messen"
                md_bg_color: app.theme_cls.primary_light
                theme_text_color: "Custom"
                
                text_color: app.theme_cls.primary_dark
                
                size_hint_x: 0.8
                size_hint_y: 0.1
                pos_hint:{'center_x': 0.5, 'center_y': 0.2}
                on_release:
                    root.current = "Messen"
    
# +++++++++++++++++++++++++++ MESSEN ++++++++++++++++++++++++++++++++++++++++++++++++++++++++
    MDScreen:
        name: "Messen"
        
        sys : sys
        dia : dia
        pulse : pulse
        weight : weight
        sugar : sugar
        

        BoxLayout:
            orientation: 'vertical'
            MDToolbar:
                title: "Blutdruck messen und abspeichern"
                elevation: 10
                right_action_items: [["dots-vertical", lambda x: root.show_theme_picker()]]


            MDFloatLayout:
                orientation: "vertical"

                MDLabel:
                    id: date_time
                    text : root.date_time
                    halign : "center"
                    pos_hint:{'center_x': 0.5, 'center_y': 0.9}
                MDTextField:
                    id: sys # name of pin input widget 
                    hint_text: "Sys in mm Hg"
                    max_text_length: 3
                    multiline: False
                    helper_text: "min. 2, max. 3 digits"
                    helper_text_mode: "on_focus"
                    pos_hint:{'center_x': 0.5, 'center_y': 0.8}
                    size_hint_x:None
                    width:200
                    required : True
                    icon_right: 'heart-plus'
                                    
                MDTextField:
                    id: dia # name of pin input widget 
                    hint_text: "Dia in mm Hg"
                    max_text_length: 3
                    multiline: False
                    helper_text: "min. 2, max. 3 digits"
                    helper_text_mode: "on_focus"
                    pos_hint:{'center_x': 0.5, 'center_y': 0.7}
                    size_hint_x:None
                    width:200
                    required : True
                    icon_right: 'heart-minus'
                MDTextField:
                    id: pulse # name of pin input widget 
                    hint_text: "Puls / min."
                    max_text_length: 3
                    multiline: False
                    helper_text: "min. 2, max. 3 digits"
                    helper_text_mode: "on_focus"
                    pos_hint:{'center_x': 0.5, 'center_y': 0.6}
                    size_hint_x:None
                    width:200
                    required : True
                    icon_right: 'heart-pulse'
                MDTextField:
                    id: weight # name of pin input widget 
                    hint_text: "Gewicht in Kg"
                    max_text_length: 3
                    multiline: False
                    helper_text: "min. 2, max. 3 digits"
                    helper_text_mode: "on_focus"
                    pos_hint:{'center_x': 0.5, 'center_y': 0.5}
                    size_hint_x:None
                    width:200
                    required : True
                    icon_right: 'weight-kilogram'
                MDTextField:
                    id: sugar # name of pin input widget 
                    hint_text: "Blutzucker in mg/dl"
                    max_text_length: 3
                    multiline: False
                    helper_text: "min. 2, max. 3 digits"
                    helper_text_mode: "on_focus"
                    pos_hint:{'center_x': 0.5, 'center_y': 0.4}
                    size_hint_x:None
                    width:200
                    required : True
                    icon_right: 'spoon-sugar'

                MDFillRoundFlatButton:
                    text: "Speichern"
                    md_bg_color: app.theme_cls.primary_light
                    theme_text_color: "Custom"
                    
                    text_color: app.theme_cls.primary_dark
                    
                    size_hint_x: 0.8
                    size_hint_y: 0.1
                    pos_hint:{'center_x': 0.5, 'center_y': 0.2}
                    on_release:
                        root.check_input()
        

# ----------------------- NAVIGATION BAR -------------------------
        MDBoxLayout:
            size_hint_y:None
            size_hint_x: 1
            height: "65dp"
            spacing: "10dp"
            padding: "12dp", 0, "12dp", 0

            canvas.before:
                Color:
                    rgb: get_color_from_hex("#f0f0f0") 
                Rectangle:
                    pos: self.pos
                    size: self.size

            FloatLayout:
                pos_hint: {"center_x": .5}
                MDIconButton:
                    icon: "heart-pulse"
                    size_hint: None, None
                    pos_hint: {"center_y": .5,"center_x": .2}
                    on_release:
                        root.current = "Messen"
                
                MDIconButton:
                    icon: "chart-line"
                    pos_hint: {"center_y": .5,"center_x": .5}
                    on_release: 
                        root.current = "Diagramm"
                
                MDIconButton:
                    icon: "information"
                    pos_hint: {"center_y": .5,"center_x": .8}
                    on_release: 
                        root.current = "Information"

# +++++++++++++++++++++++++++ DIAGRAMM ++++++++++++++++++++++++++++++++++++++++++++++++++++++++
    
    MDScreen:
        name: "Diagramm"
        radius: [0, 0, 0, 0]
        md_bg_color: app.theme_cls.primary_dark
        MDFloatLayout:
            orientation: "vertical"
            MDLabel:
                text : "Blutdruck Diagramm und exportieren"
                halign : "center"
                pos_hint:{'center_x': 0.5, 'center_y': 0.9}

            MDFillRoundFlatButton:
                text: "Export csv-file"
                md_bg_color: app.theme_cls.primary_light
                theme_text_color: "Custom"
                
                text_color: app.theme_cls.primary_dark
                
                size_hint_x: 0.8
                size_hint_y: 0.1
                pos_hint:{'center_x': 0.5, 'center_y': 0.2}
                on_release:
                    root.export_csv()
            
            

# ----------------------- NAVIGATION BAR -------------------------
        MDBoxLayout:
            size_hint_y:None
            size_hint_x: 1
            height: "65dp"
            spacing: "10dp"
            padding: "12dp", 0, "12dp", 0

            canvas.before:
                Color:
                    rgb: get_color_from_hex("#f0f0f0") 
                Rectangle:
                    pos: self.pos
                    size: self.size

            FloatLayout:
                pos_hint: {"center_x": .5}
                MDIconButton:
                    icon: "heart-pulse"
                    size_hint: None, None
                    pos_hint: {"center_y": .5,"center_x": .2}
                    on_release:
                        root.current = "Messen"
                
                MDIconButton:
                    icon: "chart-line"
                    pos_hint: {"center_y": .5,"center_x": .5}
                    on_release: 
                        root.current = "Diagramm"
                
                MDIconButton:
                    icon: "information"
                    pos_hint: {"center_y": .5,"center_x": .8}
                    on_release: 
                        root.current = "Information"

# +++++++++++++++++++++++++++ INFORMATION ++++++++++++++++++++++++++++++++++++++++++++++++++++++++
    MDScreen:
        name: "Information"
        radius: [0, 0, 0, 0]
        md_bg_color: app.theme_cls.primary_color
        MDLabel:
            text: "Blutdruck Tabelle"
            halign: "center"

# ----------------------- NAVIGATION BAR -------------------------
        MDBoxLayout:
            size_hint_y:None
            size_hint_x: 1
            height: "65dp"
            spacing: "10dp"
            padding: "12dp", 0, "12dp", 0

            canvas.before:
                Color:
                    rgb: get_color_from_hex("#f0f0f0") 
                Rectangle:
                    pos: self.pos
                    size: self.size

            FloatLayout:
                pos_hint: {"center_x": .5}
                MDIconButton:
                    icon: "heart-pulse"
                    size_hint: None, None
                    pos_hint: {"center_y": .5,"center_x": .2}
                    on_release:
                        root.current = "Messen"
                
                MDIconButton:
                    icon: "chart-line"
                    pos_hint: {"center_y": .5,"center_x": .5}
                    on_release: 
                        root.current = "Diagramm"
                
                MDIconButton:
                    icon: "information"
                    pos_hint: {"center_y": .5,"center_x": .8}
                    on_release: 
                        root.current = "Information"

        